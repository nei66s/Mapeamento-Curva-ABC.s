@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 223 16% 96%;
    --foreground: 214 20% 20%;
    --card: 0 0% 100%;
    --card-foreground: 214 20% 20%;
    --popover: 0 0% 100%;
    --popover-foreground: 214 20% 20%;
    --primary: 215 16% 30%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 12% 80%;
    --secondary-foreground: 214 20% 45%;
    --muted: 210 12% 88%;
    --muted-foreground: 214 20% 48%;
    --accent: 0 0% 20%;
    --accent-foreground: 0 0% 100%;
    --warning: 35 95% 60%;
    --warning-foreground: 0 0% 100%;
    --destructive: 0 80% 45%;
    --destructive-foreground: 0 0% 100%;
    --border: 210 10% 85%;
    --input: 210 12% 95%;
    --ring: 216 76% 63%;
    --radius: 0.5rem;
    --chart-1: 210 20% 40%;
    --chart-2: 210 15% 55%;
    --chart-3: 210 10% 65%;
    --chart-4: 220 12% 30%;
    --chart-5: 0 0% 85%;
    --curve-a: 0 78% 60%;
    --curve-a-foreground: 0 0% 100%;
    --curve-b: 50 5% 80%;
    --curve-b-foreground: 0 0% 15%;
    --curve-c: 200 10% 65%;
    --curve-c-foreground: 0 0% 100%;
    --hero-foreground: 214 20% 20%;
  }

  .dark {
    --background: 210 12% 14%;
    --foreground: 0 0% 94%;
    --card: 210 14% 18%;
    --card-foreground: 0 0% 94%;
    --popover: 210 14% 18%;
    --popover-foreground: 0 0% 94%;
    --primary: 210 10% 85%;
    --primary-foreground: 210 10% 18%;
    --secondary: 210 10% 60%;
    --secondary-foreground: 0 0% 94%;
    --muted: 210 10% 22%;
    --muted-foreground: 0 0% 94%;
    --accent: 0 0% 55%;
    --accent-foreground: 0 0% 94%;
    --warning: 35 95% 60%;
    --warning-foreground: 0 0% 94%;
    --destructive: 0 70% 55%;
    --destructive-foreground: 0 0% 94%;
    --border: 210 11% 28%;
    --input: 210 11% 25%;
    --ring: 216 56% 64%;
    --hero-foreground: 0 0% 94%;
  }

  .dark {
    --curve-a: 210 20% 65%;
    --curve-a-foreground: 0 0% 94%;
    --curve-b: 210 15% 70%;
    --curve-b-foreground: 0 0% 94%;
    --curve-c: 210 10% 30%;
    --curve-c-foreground: 0 0% 94%;
  }
}

/* Hero gradient variables (used by `HeroPanel` via the .hero-gradient class).
   These default to subtle, theme-aware stops and are overridden per color theme. */
:root {
  --hero-from: 207 30% 95%;
  --hero-via: 207 25% 88%;
  --hero-to: 207 25% 82%;
}
.dark {
  --hero-from: 210 12% 18%;
  --hero-via: 210 10% 24%;
  --hero-to: 210 10% 18%;
}

:root[data-theme="seasonal"] {
  --hero-from: 210 20% 95%;
  --hero-via: 210 16% 90%;
  --hero-to: 210 12% 86%;
}
.dark[data-theme="seasonal"] {
  --hero-from: 210 10% 20%;
  --hero-via: 210 10% 26%;
  --hero-to: 210 10% 22%;
}

[data-theme="orange"] {
  --hero-from: 210 20% 96%;
  --hero-via: 210 16% 90%;
  --hero-to: 210 12% 86%;
}
.dark[data-theme="orange"] {
  --hero-from: 210 12% 20%;
  --hero-via: 210 10% 26%;
  --hero-to: 210 10% 22%;
}

[data-theme="orange-vivid"] {
  --hero-from: 210 20% 96%;
  --hero-via: 210 16% 90%;
  --hero-to: 210 12% 86%;
}
.dark[data-theme="orange-vivid"] {
  --hero-from: 210 12% 20%;
  --hero-via: 210 10% 26%;
  --hero-to: 210 10% 22%;
}

.swatch-orange { background: hsl(18 90% 47%); }
.swatch-orange-soft { background: hsl(18 90% 47%); }
.swatch-orange-vivid { background: hsl(18 96% 56%); }
.swatch-seasonal-soft,
.swatch-seasonal-vivid {
  background: linear-gradient(135deg, hsl(330 80% 80%) 0%, hsl(40 90% 85%) 50%, hsl(150 60% 90%) 100%);
}
/* Utility classes to apply Curve A/B/C as panel backgrounds with readable foregrounds */
.curve-a {
  background-color: hsl(var(--curve-a) / 0.85);
  color: hsl(var(--curve-a-foreground));
}
.curve-b {
  background-color: hsl(var(--curve-b) / 0.85);
  color: hsl(var(--curve-b-foreground));
}
.curve-c {
  background-color: hsl(var(--curve-c) / 0.85);
  color: hsl(var(--curve-c-foreground));
}

.curve-a > *,
.curve-b > *,
.curve-c > * {
  /* ensure child text/icons inherit the readable foreground */
  color: inherit;
}

@layer base {
  /* Removed global border on all elements â€” this caused heavy visual noise
     across the app. Borders should be applied to semantic components only. */
body {
    @apply bg-background text-foreground antialiased min-h-screen;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Small utility helpers for consistent UI surfaces and elevation. Keep
     noise to a minimum with light borders and softer shadows. */
  .card {
    @apply rounded-2xl border border-border bg-card p-5 shadow-none;
  }

  .panel {
    @apply rounded-2xl border border-border/60 p-5 bg-card shadow-sm;
  }

  .elevation-0 { box-shadow: none; }
  .elevation-1 { @apply shadow-sm; }
  .elevation-2 { @apply shadow-md; }
  .elevation-3 { @apply shadow-lg; }

  .hero-soft { opacity: 0.9; filter: saturate(0.9); }
}

@layer components {
  .page-shell {
    @apply relative overflow-hidden rounded-[24px] border border-border/60 bg-card shadow-sm;
  }

  .page-shell > * + * {
    @apply mt-6;
  }
}

/* PDF / A4 helper styles used for html2canvas capture */
.pdf-a4 {
  width: 210mm;
  min-height: 297mm;
  background: #ffffff;
  color: #000000;
  box-sizing: border-box;
  padding: 2rem;
  font-family: serif;
}

.pdf-a4 header,
.pdf-a4 section,
.pdf-a4 footer {
  break-inside: avoid;
}

/* helper to render element off-screen for html2canvas capture without inline styles */
.printable-offscreen {
  position: absolute;
  left: -9999px;
  top: -9999px;
  width: 210mm; /* ensure offscreen copy has same width */
}

/* Each visual PDF page for print preview */
.pdf-page {
  width: 210mm;
  height: 297mm;
  box-sizing: border-box;
  padding: 20mm 16mm;
  background: #fff;
  color: #000;
  page-break-after: always;
  overflow: hidden;
}

.pdf-a4 .pdf-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #1f2937;
  padding-bottom: 8px;
  margin-bottom: 8px;
}

.pdf-a4 h1 { font-size: 18px; margin: 0; }
.pdf-a4 h2 { font-size: 13px; margin: 0 0 6px 0; }
.pdf-a4 p { font-size: 11px; margin: 0 0 6px 0; }
.pdf-a4 .label { font-weight: 600; color: #374151; }
.pdf-a4 .value { font-weight: 400; color: #111827; }

.pdf-footer { position: absolute; bottom: 16mm; left: 0; right: 0; text-align: center; font-size: 10px; color: #6b7280; }

/* Map locate control and user marker styles */
.leaflet-control-locate { display: inline-block; }
.leaflet-control-locate button { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border: none; background: white; border-radius: 8px; cursor: pointer; }
.leaflet-control-locate button:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.12); }
.leaflet-control-locate button.locate-active { background: #16a34a; color: white; }

/* Pulsing user marker - applies to Leaflet circleMarker SVG path via className */
.user-circle { animation: pulse 1.8s infinite ease-out; }
@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.6); opacity: 0.6; }
  100% { transform: scale(1); opacity: 1; }
}

/* professional pin icon for user location (divIcon) */
.user-pin-wrapper { display: inline-block; position: relative; width: 36px; height: 36px; line-height: 0; }
/* Position the visual pin so its tip is at the bottom center of the wrapper
  (this makes the Leaflet iconAnchor [18,36] align with the pin tip). */
.user-pin { position: absolute; left: 50%; bottom: 0; transform: translateX(-50%); }
.user-pin .pin-svg { width: 28px; height: 28px; display: block; }
/* Pulse should be centered on the tip of the pin (bottom center). We position
  the pulse's center at the bottom edge of the wrapper by using bottom: 0 and
  translateY(50%), so the pulse's center aligns with the pin tip. */
.user-pin-pulse { display: none; }

.mobile-bottom-nav {
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.4rem);
}
